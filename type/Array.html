<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>array </title>
</head>
<body>
<script>
    {
        console.log('检测数组Array.isArray(), IE9+')
        var arr = [3, 4, 2, 'a']
        console.log(Array.isArray(arr))
        console.log(Array.isArray({}))
    }

    {
        console.log('数组拼接splice(), 先删除再插入')
        // type.splice(start[, deleteCount[, insertItem1[, item2[, ...]]]])
        var arr = [3, 4, 2, 'a']
        //1。删除
        arr.splice(1, 2)
        //2. 插入
        arr.splice(1, 0, 'f', 23, 12)
        //3. 替换(先删除后插入)
        arr.splice(1, 3, 'add', '7')
        console.log(arr)
    }

    {
        console.log('数组切片方法slice()')
        arr.slice(1, 3)
        console.log(arr)
        // 相当于 str.substring()

        console.log('数组合并方法concat()')
        var a1 = [2, 3]
        var a2 = [5, 6, 1]
        console.log(a1 + a2)
        // 加号操作符将变量类型自动转化成字符串，于是这样表示的是字符串相加,结果为 '2, 35, 6, 1'
        //数组合并应该用 concat, 不能用加号操作符
        var a3 = a1.concat(a2)
    }
    {
        console.log('数组查找方法indexOf(), 严格等于，返回位置，IE9+')
        console.log(['a b', 'b c'].indexOf('a b')) // 0
        console.log(['a b', 'b c'].indexOf('c d')) // -1
    }
    {
        console.log('迭代方法')
        arr = [1, 2, 3, 4, 5, 4, 3, 2, 1]
        console.log('arr: ' + arr)
        // forEach 不常用, 对每一项都调用函数处理，无返回值，不支持continue, break
        arr.forEach(function (item, index, array) {
            // if (item === 2) {
            //     continue
            // }
            console.log('item: ' + item + ', index: ' + index)
            //  缺点：arr.forEach() 不支持continue, break
            // 只有在 loop statement 中才能使用 continue, break
        })

        // map 对每一项进行加工，返回一个新数组
        var res = arr.map(function (item, index, array) {
            return 'id' + item * 2
        })
        console.log('map res: ' + res)

        // filter 过滤满足条件的项
        var res = arr.filter(function (item, index, array) {
            return item > 2
        })
        console.log('filter res: ' + res)

        // every 是否每一项都满足条件
        var res = arr.every(function (item, index, array) {
            return item > 2
        })
        console.log('every > 2: ' + res)

        // some 是否存在某些项满足条件
        var res = arr.some(function (item, index, array) {
            return item > 2
        })
        console.log('some > 2: ' + res)
    }

    {
        console.log('拷贝数组concat(), slice(), 一层拷贝')
        var a1 = [3, 1, 2]
        var a2 = a1.slice()
        var a3 = a1.concat()
        a2.push(22)
        a3.push(33)
        console.log(a1 + '')
        console.log(a2.toString())
        console.log(a3.toString())
    }

    {
        console.log('数组重排序方法reverse(), sort(), 会改变数组本身')
        var a1 = [1, 7, 8, 3, 0, 1, 8, 6]
        console.log(a1 + '')
        a1.reverse()
        console.log(a1 + '')
        // 升序
        a1.sort(function (a, b) {
            return a - b
        })
        console.log(a1 + '')
    }

    {
        console.log(`归并方法reduce`)
        console.log(`数组扁平化 Array Flatten`)
        let arr = [[1, 2], [3, 4], [5, 6, 7]]
        console.log(arr)
        let arr2 = arr.reduce((accumulator, currentValue) => accumulator.concat(currentValue), [])
        console.log(arr2)

        console.log(`数组求和`)
        let res = arr2.reduce((accumulator, currentValue) => accumulator + currentValue)
        console.log(res)
    }


</script>
</body>
</html>
